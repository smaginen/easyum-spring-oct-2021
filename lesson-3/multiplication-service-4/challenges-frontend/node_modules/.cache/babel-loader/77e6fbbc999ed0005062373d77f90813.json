{"ast":null,"code":"import _defineProperty from\"/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import*as React from\"react\";import ChallengesApiClient from\"../services/ChallengesApiClient\";import LastAttemptsComponent from'./LastAttemptsComponent';import LeaderBoardComponent from'./LeaderBoardComponent';var ChallengeComponent=/*#__PURE__*/function(_React$Component){_inherits(ChallengeComponent,_React$Component);var _super=_createSuper(ChallengeComponent);function ChallengeComponent(props){var _this;_classCallCheck(this,ChallengeComponent);_this=_super.call(this,props);_this.state={a:'',b:'',user:'',message:'',guess:0,lastAttempts:[]};_this.handleSubmitResult=_this.handleSubmitResult.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(ChallengeComponent,[{key:\"componentDidMount\",value:function componentDidMount(){this.refreshChallenge();}},{key:\"refreshChallenge\",value:function refreshChallenge(){var _this2=this;ChallengesApiClient.challenge().then(function(res){if(res.ok){res.json().then(function(json){_this2.setState({a:json.factorA,b:json.factorB});});}else{_this2.updateMessage(\"Can't reach the server\");}});}},{key:\"handleChange\",value:function handleChange(event){var name=event.target.name;this.setState(_defineProperty({},name,event.target.value));}},{key:\"handleSubmitResult\",value:function handleSubmitResult(event){var _this3=this;event.preventDefault();ChallengesApiClient.sendGuess(this.state.user,this.state.a,this.state.b,this.state.guess).then(function(res){if(res.ok){res.json().then(function(json){if(json.correct){_this3.updateMessage(\"Congratulations! Your guess is correct\");}else{_this3.updateMessage(\"Oops! Your guess \"+json.resultAttempt+\" is wrong, but keep playing!\");}_this3.updateLastAttempts(_this3.state.user);_this3.refreshChallenge();});}else{_this3.updateMessage(\"Error: server error or not available\");}});}},{key:\"updateMessage\",value:function updateMessage(m){this.setState({message:m});}},{key:\"updateLastAttempts\",value:function updateLastAttempts(userAlias){var _this4=this;ChallengesApiClient.getAttempts(userAlias).then(function(res){if(res.ok){var attempts=[];res.json().then(function(data){data.forEach(function(item){attempts.push(item);});_this4.setState({lastAttempts:attempts});});}});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"display-column\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Your new challenge is\"),/*#__PURE__*/React.createElement(\"div\",{className:\"challenge\"},this.state.a,\" x \",this.state.b)),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmitResult},/*#__PURE__*/React.createElement(\"label\",null,\"Your alias:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",maxLength:\"12\",name:\"user\",value:this.state.user,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Your guess:\",/*#__PURE__*/React.createElement(\"input\",{type:\"number\",min:\"0\",name:\"guess\",value:this.state.guess,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\"})),/*#__PURE__*/React.createElement(\"h4\",null,this.state.message),this.state.lastAttempts.length>0&&/*#__PURE__*/React.createElement(LastAttemptsComponent,{lastAttempts:this.state.lastAttempts}),/*#__PURE__*/React.createElement(LeaderBoardComponent,null));}}]);return ChallengeComponent;}(React.Component);export default ChallengeComponent;","map":{"version":3,"sources":["/Users/evgenijsmagin/IdeaProjects/easyum-spring-oct-2021/lesson-3/multiplication-service-4/challenges-frontend/src/components/ChallengeComponent.js"],"names":["React","ChallengesApiClient","LastAttemptsComponent","LeaderBoardComponent","ChallengeComponent","props","state","a","b","user","message","guess","lastAttempts","handleSubmitResult","bind","handleChange","refreshChallenge","challenge","then","res","ok","json","setState","factorA","factorB","updateMessage","event","name","target","value","preventDefault","sendGuess","correct","resultAttempt","updateLastAttempts","m","userAlias","getAttempts","attempts","data","forEach","item","push","length","Component"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport ChallengesApiClient from \"../services/ChallengesApiClient\";\nimport LastAttemptsComponent from './LastAttemptsComponent';\nimport LeaderBoardComponent from './LeaderBoardComponent';\n\nclass ChallengeComponent extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            a: '', b: '',\n            user: '',\n            message: '',\n            guess: 0,\n            lastAttempts: []\n        };\n\n\n        this.handleSubmitResult = this.handleSubmitResult.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    componentDidMount(): void {\n        this.refreshChallenge();\n    }\n\n    refreshChallenge() {\n        ChallengesApiClient.challenge().then(\n            res => {\n                if (res.ok) {\n                    res.json().then(json => {\n                        this.setState({\n                            a: json.factorA,\n                            b: json.factorB\n                        });\n                    });\n                } else {\n                    this.updateMessage(\"Can't reach the server\");\n                }\n            }\n        );\n    }\n\n    handleChange(event) {\n        const name = event.target.name;\n        this.setState({\n            [name]: event.target.value\n        });\n    }\n\n    handleSubmitResult(event) {\n        event.preventDefault();\n        ChallengesApiClient.sendGuess(this.state.user,\n            this.state.a, this.state.b,\n            this.state.guess)\n            .then(res => {\n                if (res.ok) {\n                    res.json().then(json => {\n                        if (json.correct) {\n                            this.updateMessage(\"Congratulations! Your guess is correct\");\n                        } else {\n                            this.updateMessage(\"Oops! Your guess \" + json.resultAttempt +\n                                \" is wrong, but keep playing!\");\n                        }\n                        this.updateLastAttempts(this.state.user);\n                        this.refreshChallenge();\n                    });\n                } else {\n                    this.updateMessage(\"Error: server error or not available\");\n                }\n            });\n    }\n\n    updateMessage(m: string) {\n        this.setState({\n            message: m\n        });\n    }\n\n    updateLastAttempts(userAlias: string) {\n        ChallengesApiClient.getAttempts(userAlias).then(res => {\n            if (res.ok) {\n                let attempts: Attempt[] = [];\n                res.json().then(data => {\n                    data.forEach(item => {\n                        attempts.push(item);\n                    });\n                    this.setState({\n                        lastAttempts: attempts\n                    });\n                })\n            }\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"display-column\">\n                <div>\n                    <h3>Your new challenge is</h3>\n                    <div className=\"challenge\">\n                        {this.state.a} x {this.state.b}\n                    </div>\n                </div>\n                <form onSubmit={this.handleSubmitResult}>\n                    <label>\n                        Your alias:\n                        <input type=\"text\" maxLength=\"12\"\n                               name=\"user\"\n                               value={this.state.user}\n                               onChange={this.handleChange}/>\n                    </label>\n                    <br/>\n                    <label>\n                        Your guess:\n                        <input type=\"number\" min=\"0\"\n                               name=\"guess\"\n                               value={this.state.guess}\n                               onChange={this.handleChange}/>\n                    </label>\n                    <br/>\n                    <input type=\"submit\" value=\"Submit\"/>\n                </form>\n                <h4>{this.state.message}</h4>\n                {this.state.lastAttempts.length > 0 &&\n                    <LastAttemptsComponent lastAttempts={this.state.lastAttempts}/>\n                }\n                <LeaderBoardComponent/>\n            </div>\n        );\n    }\n}\n\nexport default ChallengeComponent;\n"]},"metadata":{},"sourceType":"module"}